<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>endpoint test</title>
  <link rel="stylesheet" href="/static/waterdark.css">
  <link rel="stylesheet" href="/static/watermod.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/gml.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
</head>
<body>
  <div class="left">
    <h1>endpoint test</h1>
    <p class="tagline">PÃ¡gina de referÃªncia para os endpoints disponÃ­veis no servidor Flask + Mongo</p>
    <!-- sorcery -->
    <div class="endpoint">
      <h3>ğŸ§™â€â™‚ï¸ Sorcery TCG</h3>
      <span><code>GET /sorcery/cards</code> â€” Lista cartas de Sorcery</span><br>
      <span><code>GET /sorcery/cards/random</code> â€” Retorna uma carta aleatÃ³ria</span>
      <ul>
        <li><a href="/sorcery/cards?limit=5" target="_blank">/sorcery/cards?limit=5</a></li>
        <li><a href="/sorcery/cards/random" target="_blank">/sorcery/cards/random</a></li>
      </ul>
    </div>
    <!-- one piece -->
    <div class="endpoint">
        <h3>ğŸ´â€â˜ ï¸ One Piece TCG</h3>
        <span><code>GET /one-piece/cards</code> â€” Lista cartas do One Piece</span><br>
        <span><code>GET /one-piece/cards/random</code> â€” Retorna uma carta aleatÃ³ria</span>
        <ul>
            <li><a href="/one-piece/cards?limit=5" target="_blank">/one-piece/cards?limit=5</a></li>
            <li><a href="/one-piece/cards?name=sanji" target="_blank">/one-piece/cards?name=sanji</a></li>
            <li><a href="/one-piece/cards?set_code=ST14" target="_blank">/one-piece/cards?set_code=ST14</a></li>
            <li><a href="/one-piece/cards/random" target="_blank">/one-piece/cards/random</a></li>
        </ul>
    </div>
    <!-- riftbound -->
    <div class="endpoint">
        <h3>ğŸ”¥ Riftbound</h3>
        <span><code>GET /riftbound/cards</code> â€” Lista cartas do Riftbound</span><br>
        <span><code>GET /riftbound/cards/random</code> â€” Retorna uma carta aleatÃ³ria</span>    
        <ul>
            <li><a href="/riftbound/cards?limit=5" target="_blank">/riftbound/cards?limit=5</a></li>
            <li><a href="/riftbound/cards?name=tibbers" target="_blank">/riftbound/cards?name=tibbers</a></li>
            <li><a href="/riftbound/cards/random" target="_blank">/riftbound/cards/random</a></li>
        </ul>
    </div>
    <!-- fab -->
    <div class="endpoint">
        <h3>âš”ï¸ Flesh and Blood</h3>
        <span><code>GET /fab/cards</code> â€” Lista cartas de FAB</span><br>
        <span><code>GET /fab/cards/random</code> â€” Retorna uma carta aleatÃ³ria</span>
        <p><strong>Filtros disponÃ­veis:</strong></p>
        <ul>
            <li><code>name</code> â€” busca parcial (regex)</li>
            <li><code>set_id</code> â€” ID do set</li>
        </ul>       
        <ul>
            <li><a href="/fab/cards?limit=5" target="_blank">/fab/cards?limit=5</a></li>
            <li><a href="/fab/cards?name=bolt" target="_blank">/fab/cards?name=bolt</a></li>
            <li><a href="/fab/cards?set_id=MON" target="_blank">/fab/cards?set_id=MON</a></li>
            <li><a href="/fab/cards/random" target="_blank">/fab/cards/random</a></li>
        </ul>
    </div>
    <!-- yugioh -->
    <div class="endpoint">
        <h3>ğŸƒ Yu-Gi-Oh!</h3>
        <span><code>GET /yugioh/cards</code> â€” Lista cartas de Yu-Gi-Oh!</span><br>
        <span><code>GET /yugioh/cards/random</code> â€” Retorna uma carta aleatÃ³ria</span>
        <p><strong>Filtros disponÃ­veis:</strong></p>
        <ul>
            <li><code>id</code>, <code>konami_id</code>, <code>md_rarity</code>, <code>name</code></li>
            <li><code>set_code</code> â€” cÃ³digo do booster/set</li>
            <li><code>rarity</code> â€” raridade do set</li>
        </ul>
        <ul>
            <li><a href="/yugioh/cards?limit=5" target="_blank">/yugioh/cards?limit=5</a></li>
            <li><a href="/yugioh/cards?name=dark+magician" target="_blank">/yugioh/cards?name=dark+magician</a></li>
            <li><a href="/yugioh/cards?set_code=LOB" target="_blank">/yugioh/cards?set_code=LOB</a></li>
            <li><a href="/yugioh/cards/random" target="_blank">/yugioh/cards/random</a></li>
        </ul>
    </div>
  </div>
  <div class="right">
    <form id="test-form">
      <input type="text" id="endpoint" placeholder="/yugioh/cards?limit=3" required>
      <button type="submit">Executar</button>
    </form>
    <pre>
        <code id="result" class="language-json">Aguardando requisiÃ§Ã£o...</code>
    </pre>
  </div>
  <script>
    document.getElementById('test-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      const path = document.getElementById('endpoint').value.trim();
      if (!path) return;
      const resDiv = document.getElementById('result');
      resDiv.textContent = 'Carregando...';
      try {
        const res = await fetch(path);
        const data = await res.json();
        resDiv.textContent = JSON.stringify(data, null, 2);
      } catch (err) {
        resDiv.textContent = 'Erro: ' + err;
      }
      hljs.highlightAll();
    });
    // Faz todos os links preencherem o input e executar o teste
document.querySelectorAll('a[href]').forEach(a => {
  a.addEventListener('click', e => {
    e.preventDefault();
    const input = document.getElementById('endpoint');
    input.value = a.getAttribute('href');
    //document.getElementById('test-form').dispatchEvent(new Event('submit'));
  });
});
  </script>
</body>
</html>
